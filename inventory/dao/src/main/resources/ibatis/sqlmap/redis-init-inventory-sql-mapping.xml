<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tuan-inventory" >
	<!-- 商品配型信息-->	
	<!-- <resultMap id="RedisGoodsSelectionRelationResult" class="com.tuan.inventory.dao.data.redis.RedisGoodsSelectionRelationDO">
	    <result column="id" property="id" jdbcType="INTEGER" />
	    <result column="goods_id" property="goodsId" jdbcType="INTEGER" />
	    <result column="good_type_id" property="goodTypeId" jdbcType="INTEGER" />
	    <result column="totalNumber" property="totalNumber" jdbcType="INTEGER" />
	    <result column="leftNumber" property="leftNumber" jdbcType="INTEGER" />
	    <result column="suppliers_inventory_id" property="suppliersInventoryId" jdbcType="INTEGER" />
	    <result column="limit_storage" property="limitStorage" jdbcType="INTEGER" />   	    
	 </resultMap> -->
	 	
  	 <!-- 商品主体库存信息-->	
	<resultMap id="RedisInventoryResult" class="com.tuan.inventory.dao.data.redis.RedisInventoryDO">
	    <result column="goods_id" property="goodsId" jdbcType="INTEGER" />
	    <result column="total_num" property="totalNumber" jdbcType="INTEGER" />
	    <result column="left_num" property="leftNumber" jdbcType="INTEGER" />
	    <result column="limit_storage" property="limitStorage" jdbcType="INTEGER" />
	    <result column="add_goods_selection" property="isAddGoodsSelection" jdbcType="INTEGER" />
	    <result column="direct_consumption" property="isDirectConsumption" jdbcType="INTEGER" />
	    <result column="waterflood_val" property="waterfloodVal" jdbcType="INTEGER" />
	 </resultMap>
	 
	 <!-- 分店库存信息-->	
	<!-- <resultMap id="RedisGoodsSuppliersInventoryResult" class="com.tuan.inventory.dao.data.redis.RedisGoodsSuppliersInventoryDO">
	    <result column="id" property="id" jdbcType="INTEGER" />
	    <result column="goods_id" property="goodsId" jdbcType="INTEGER" />
	    <result column="suppliers_id" property="suppliersId" jdbcType="INTEGER" />
	    <result column="totalNumber" property="totalNumber" jdbcType="INTEGER" />
	    <result column="leftNumber" property="leftNumber" jdbcType="INTEGER" />
	    <result column="limit_storage" property="limitStorage" jdbcType="INTEGER" />
	 </resultMap> -->
	
	<!-- 通过商品ID查询非选型实物商品的库存  -->	
	<select id="selectRedisInventoryByGoodsId" resultMap="RedisInventoryResult"  parameterClass="java.lang.Long">
		select ga.goods_id,ga.total_num,ga.left_num,ga.limit_storage ,ga.add_goods_selection,ga.direct_consumption,wms.is_be_delivery
		from jeehe_goods_attribute ga ,jeehe_goods_wms wms where ga.goods_id=wms.id AND ga.goods_id = #goodsId:BIGINT#
	</select>
</sqlMap>