<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tuan-inventory" >

	<!-- 商品配型信息-->	
	<resultMap id="RedisGoodsSelectionRelationResult" class="com.tuan.inventory.dao.data.redis.RedisGoodsSelectionRelationDO">
	    <result column="id" property="id" jdbcType="INTEGER" />
	    <result column="goods_id" property="goodsId" jdbcType="INTEGER" />
	    <result column="good_type_id" property="goodTypeId" jdbcType="INTEGER" />
	    <result column="totalNumber" property="totalNumber" jdbcType="INTEGER" />
	    <result column="leftNumber" property="leftNumber" jdbcType="INTEGER" />
	    <result column="suppliers_inventory_id" property="suppliersInventoryId" jdbcType="INTEGER" />
	    <result column="limit_storage" property="limitStorage" jdbcType="INTEGER" />   	    
	 </resultMap>
	 	
  	 <!-- 商品主体库存信息-->	
	<resultMap id="RedisInventoryResult" class="com.tuan.inventory.dao.data.redis.RedisInventoryDO">
	    <result column="goods_id" property="goodsId" jdbcType="INTEGER" />
	    <result column="total_num" property="totalNumber" jdbcType="INTEGER" />
	    <result column="left_num" property="leftNumber" jdbcType="INTEGER" />
	    <result column="limit_storage" property="limitStorage" jdbcType="INTEGER" />
	    <result column="add_goods_selection" property="isAddGoodsSelection" jdbcType="INTEGER" />
	    <result column="direct_consumption" property="isDirectConsumption" jdbcType="INTEGER" />
	    <result column="waterflood_val" property="waterfloodVal" jdbcType="INTEGER" />
	 </resultMap>
	 
	 <!-- 分店库存信息-->	
	<resultMap id="RedisGoodsSuppliersInventoryResult" class="com.tuan.inventory.dao.data.redis.RedisGoodsSuppliersInventoryDO">
	    <result column="id" property="id" jdbcType="INTEGER" />
	    <result column="goods_id" property="goodsId" jdbcType="INTEGER" />
	    <result column="suppliers_id" property="suppliersId" jdbcType="INTEGER" />
	    <result column="totalNumber" property="totalNumber" jdbcType="INTEGER" />
	    <result column="leftNumber" property="leftNumber" jdbcType="INTEGER" />
	    <result column="limit_storage" property="limitStorage" jdbcType="INTEGER" />
	 </resultMap>
	  <!-- 记录库存日志流水信息-->	
	<resultMap id="RedisInventoryLogResult" class="com.tuan.inventory.dao.data.redis.RedisInventoryLogDO">
	    <result column="id" property="id" jdbcType="BIGINT"/>
	    <result column="goods_id" property="goodsId" jdbcType="BIGINT" />
	    <result column="order_id" property="orderId" jdbcType="BIGINT" />
	    <result column="user_id" property="userId" jdbcType="BIGINT" />
	    <result column="type" property="type" jdbcType="VARCHAR" />
	    <result column="item" property="item" jdbcType="VARCHAR" />
	     <result column="create_time" property="createTime" jdbcType="INTEGER" />
	    <result column="inventory_vara" property="variableQuantity" jdbcType="VARCHAR" />
	     <result column="opt_type" property="operateType" jdbcType="VARCHAR" />
	    <result column="content" property="content" jdbcType="VARCHAR" />
	    <result column="system" property="system" jdbcType="VARCHAR" />
	    <result column="client_ip" property="clientIp" jdbcType="VARCHAR" />
	    <result column="remark" property="remark" jdbcType="VARCHAR" />
	 </resultMap>
  	 <!-- 插入分店配型表信息 -->
  	<insert id="insertSelectionRelation" parameterClass="com.tuan.inventory.dao.data.redis.RedisGoodsSelectionRelationDO" >
    insert into jeehe_inventory_selection_relation (id, goods_id, good_type_id, totalNumber, leftNumber, suppliers_inventory_id,limit_storage)
    values (#id:INTEGER#, #goodsId:INTEGER#,#goodTypeId:INTEGER#,#totalNumber:INTEGER#,#leftNumber:INTEGER#,#suppliersInventoryId:INTEGER#,
    		#limitStorage:INTEGER#)
     </insert>
  <!-- 插入库存日志流水表信息 -->
  	<insert id="insertInventoryQueue" parameterClass="com.tuan.inventory.dao.data.redis.RedisInventoryLogDO" >
    insert into jeehe_inventory_log 
    (id, 
    goods_id, 
    order_id, 
    user_id, 
    type, 
    item,
    create_time,
    inventory_vara,
    opt_type,
    content,
    system,
    client_ip,
    remark)
    values (#id:BIGINT#, 
            #goodsId:BIGINT#,
            #orderId:BIGINT#,
            #userId:BIGINT#,
            #type:VARCHAR#,
            #item:VARCHAR#,
            #createTime:INTEGER#,
    		#variableQuantity:VARCHAR#,
    		#operateType:VARCHAR#,
    		#content:VARCHAR#,
    		#system:VARCHAR#,
    		#clientIp:VARCHAR#,
    		#remark:VARCHAR#)
    		
    <!-- <selectKey resultClass="java.lang.Long" keyProperty="id" >
      SELECT LAST_INSERT_ID()
    </selectKey> -->
     </insert>
   
</sqlMap>