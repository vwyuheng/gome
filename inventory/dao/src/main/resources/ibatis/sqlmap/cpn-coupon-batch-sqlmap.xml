<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="cpn_coupon_batch">
	<resultMap id="cpnCouponBatchResult" class="com.tuan.pmt.dao.data.CpnCouponBatchDO">
		<result column="batch_id" property="batchId" jdbcType="BIGINT" />
		<result column="assign_type" property="assignType" jdbcType="VARCHAR" />
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="backend_name" property="backendName" jdbcType="VARCHAR" />
		<result column="gen_time" property="genTime" jdbcType="TIMESTAMP" />
		<result column="start_time" property="startTime" jdbcType="TIMESTAMP" />
		<result column="end_time" property="endTime" jdbcType="TIMESTAMP" />
		<result column="face_value" property="faceValue" jdbcType="INTEGER" />
		<result column="num" property="num" jdbcType="BIGINT" />
		<result column="admin_id" property="adminId" jdbcType="BIGINT" />
		<result column="department" property="department" jdbcType="VARCHAR" />
		<result column="comment" property="comment" jdbcType="VARCHAR" />
		<result column="invalid_time" property="invalidTime" jdbcType="TIMESTAMP" />
		<result column="invalid_admin_id" property="invalidAdminId" jdbcType="BIGINT" />
		<result column="invalid_reason" property="invalidReason" jdbcType="VARCHAR" />
		<result column="use_terminal" property="useTerminal" jdbcType="VARCHAR" />
		<result column="bind_limit" property="bindLimit" jdbcType="INTEGER" />
		<result column="goods_price" property="goodsPrice" jdbcType="INTEGER" />
		<result column="goods_set_amount" property="goodsSetAmount" jdbcType="INTEGER" />
		<result column="goods_ids" property="goodsIds" jdbcType="VARCHAR" />
		<result column="first_time" property="firstTime" jdbcType="INTEGER" />
		<result column="bind_phone" property="bindPhone" jdbcType="INTEGER" />
		<result column="used_num" property="usedNum" jdbcType="BIGINT" />
		<result column="bind_num" property="bindNum" jdbcType="BIGINT" />
		<result column="freeze_num" property="freezeNum" jdbcType="BIGINT" />
		<result column="invalid_num" property="invalidNum" jdbcType="BIGINT" />
		<result column="refund_amount" property="refundAmount" jdbcType="DECIMAL" />
		<result column="used_amount" property="usedAmount" jdbcType="DECIMAL" />
		<result column="user_num" property="userNum" jdbcType="BIGINT" />
		<result column="goods_amount" property="goodsAmount" jdbcType="DECIMAL" />
		<result column="status" property="status" jdbcType="INTEGER" />
		<result column="all_city" property="allCity" jdbcType="INTEGER" />
		<result column="all_cat" property="allCat" jdbcType="INTEGER" />
	</resultMap>
	
	<select id="queryCpnCouponBatchByBatchId" parameterClass="Long" resultMap="cpnCouponBatchResult">
		select batch_id,assign_type,name,backend_name,gen_time,start_time,end_time,face_value,num,admin_id,department,comment,
			invalid_time,invalid_admin_id,invalid_reason,use_terminal,bind_limit,goods_price,goods_set_amount,goods_ids,       
			first_time,bind_phone,used_num,bind_num,freeze_num,invalid_num,refund_amount,used_amount,user_num,goods_amount,       
			status,all_city,all_cat
		from cpn_coupon_batch
		where batch_id = #batchId:BIGINT#
	</select>

	<update id="updateCpnCouponBatchByBatchId" parameterClass="com.tuan.pmt.dao.data.CpnCouponBatchDO">
		update cpn_coupon_batch set
			invalid_time=#invalidTime:TIMESTAMP#,
			invalid_admin_id=#invalidAdminId:BIGINT# ,
			invalid_reason=#invalidReason:BIGINT# ,
			status=#status:TINYINT# 
		where batch_id = #batchId:BIGINT#
	</update>
</sqlMap>