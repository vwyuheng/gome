<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tuan-inventory" >

    <!-- 商品物流信息-->	
	<resultMap id="GoodsInventoryWMSResult" class="com.tuan.inventory.dao.data.redis.GoodsInventoryWMSDO">
	    <result column="id" property="id" jdbcType="BIGINT" />
	    <result column="goods_id" property="goodsId" jdbcType="BIGINT" />
	    <result column="total_num" property="totalNumber" jdbcType="INTEGER" />
	    <result column="left_num" property="leftNumber" jdbcType="INTEGER" />
	    <result column="is_be_delivery" property="isBeDelivery" jdbcType="INTEGER" />   	    
	 </resultMap>
	 
	<!-- 商品配型信息-->	
	<resultMap id="GoodsSelectionResult" class="com.tuan.inventory.dao.data.redis.GoodsSelectionDO">
	    <result column="id" property="id" jdbcType="BIGINT" />
	    <result column="goods_id" property="goodsId" jdbcType="BIGINT" />
	   <!--  <result column="user_id" property="userId" jdbcType="BIGINT" /> -->
	    <result column="good_type_id" property="goodTypeId" jdbcType="INTEGER" />
	    <result column="total_num" property="totalNumber" jdbcType="INTEGER" />
	    <result column="left_num" property="leftNumber" jdbcType="INTEGER" />
	     <result column="waterfloodVal" property="waterfloodVal" jdbcType="INTEGER" />
	    <result column="suppliers_inventory_id" property="suppliersInventoryId" jdbcType="INTEGER" />
	    <result column="limit_storage" property="limitStorage" jdbcType="INTEGER" />   	    
	 </resultMap>
	 	
   <!-- 商品主体库存信息-->	
	<resultMap id="GoodsInventoryResult" class="com.tuan.inventory.dao.data.redis.GoodsInventoryDO">
	    <result column="goods_id" property="goodsId" jdbcType="BIGINT" />
	    <!--  <result column="user_id" property="userId" jdbcType="BIGINT" /> -->
	    <result column="total_num" property="totalNumber" jdbcType="INTEGER" />
	    <result column="left_num" property="leftNumber" jdbcType="INTEGER" />
	    <result column="limit_storage" property="limitStorage" jdbcType="INTEGER" />
	     <result column="waterflood_val" property="waterfloodVal" jdbcType="INTEGER" />
	 </resultMap>
	 
	 <!-- 分店库存信息-->	
	<resultMap id="GoodsSuppliersResult" class="com.tuan.inventory.dao.data.redis.GoodsSuppliersDO">
	    <result column="id" property="id" jdbcType="BIGINT" />
	    <result column="goods_id" property="goodsId" jdbcType="BIGINT" />
	    <!--  <result column="user_id" property="userId" jdbcType="BIGINT" /> -->
	    <result column="suppliers_id" property="suppliersId" jdbcType="INTEGER" />
	    <result column="total_num" property="totalNumber" jdbcType="INTEGER" />
	    <result column="left_num" property="leftNumber" jdbcType="INTEGER" />
	    <result column="limit_storage" property="limitStorage" jdbcType="INTEGER" />
	    <result column="waterflood_val" property="waterfloodVal" jdbcType="INTEGER" />
	 </resultMap>
	  <!-- 记录库存日志流水信息-->	
	<resultMap id="GoodsInventoryActionResult" class="com.tuan.inventory.dao.data.redis.GoodsInventoryActionDO">
	    <result column="id" property="id" jdbcType="BIGINT"/>
	    <result column="goods_id" property="goodsId" jdbcType="BIGINT" />
	    <result column="order_id" property="orderId" jdbcType="BIGINT" />
	    <result column="user_id" property="userId" jdbcType="BIGINT" />
	    <result column="type" property="businessType" jdbcType="VARCHAR" />
	    <result column="item" property="item" jdbcType="VARCHAR" />
	     <result column="create_time" property="createTime" jdbcType="INTEGER" />
	    <result column="inventory_vara" property="inventoryChange" jdbcType="VARCHAR" />
	    <result column="original_inventory" property="originalInventory" jdbcType="VARCHAR" />
	     <result column="opt_type" property="actionType" jdbcType="VARCHAR" />
	    <result column="content" property="content" jdbcType="VARCHAR" />
	    <result column="system" property="clientName" jdbcType="VARCHAR" />
	    <result column="client_ip" property="clientIp" jdbcType="VARCHAR" />
	    <result column="remark" property="remark" jdbcType="VARCHAR" />
	 </resultMap>
  	 <!-- 插入分店配型表信息 -->
  	<insert id="insertSelectionRelation" parameterClass="com.tuan.inventory.dao.data.redis.GoodsSelectionDO" >
    insert into jeehe_inventory_selection_relation (id, goods_id, good_type_id, totalNumber, leftNumber, suppliers_inventory_id,limit_storage)
    values (#id:INTEGER#, #goodsId:INTEGER#,#goodTypeId:INTEGER#,#totalNumber:INTEGER#,#leftNumber:INTEGER#,#suppliersInventoryId:INTEGER#,
    		#limitStorage:INTEGER#)
     </insert>
  <!-- 插入库存日志流水表信息 -->
  	<insert id="insertInventoryQueue" parameterClass="com.tuan.inventory.dao.data.redis.GoodsInventoryActionDO" >
    insert into jeehe_inventory_log 
    (id, 
    goods_id, 
    order_id, 
    user_id, 
    type, 
    item,
    create_time,
    inventory_vara,
    original_inventory,
    opt_type,
    content,
    system,
    client_ip,
    remark)
    values (#id:BIGINT#, 
            #goodsId:BIGINT#,
            #orderId:BIGINT#,
            #userId:BIGINT#,
            #businessType:VARCHAR#,
            #item:VARCHAR#,
            #createTime:INTEGER#,
    		#inventoryChange:VARCHAR#,
    		#originalInventory:VARCHAR#,
    		#actionType:VARCHAR#,
    		#content:VARCHAR#,
    		#clientName:VARCHAR#,
    		#clientIp:VARCHAR#,
    		#remark:VARCHAR#)
    		
    <!-- <selectKey resultClass="java.lang.Long" keyProperty="id" >
      SELECT LAST_INSERT_ID()
    </selectKey> -->
     </insert>
   
</sqlMap>